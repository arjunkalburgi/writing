{"hash":"c7c6c3807120864d58ef7da835db316022afe7ce","data":{"post":{"id":"66e415dbdd5abea92501200152e32f40","title":"How to use Modals in Ionic v4","content":"<blockquote>\n<p>After taking much too long to figure this out myself, Iâ€™m writing a blog post about it to help the nextÂ dev.</p>\n</blockquote>\n<p>This should be easy, but the documentation for it is a little lacking. Iâ€™ve <a href=\"https://github.com/ionic-team/ionic/pull/17944#issuecomment-522067671\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">asked</a> them to update it but just in case they donâ€™t Iâ€™m writing this for your sanity.</p>\n<h3 id=\"issue\"><a href=\"#issue\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Issue</h3>\n<p>Originally my issue was that the modal was activating too early, before the button-press to activate the modal. When I would navigate to the page that the modal should be accessed on, it would show the modal as a full page instead of the page Iâ€™ve navigated to.</p>\n<p>This solution will also help solve the <code class=\"language-text\">ERROR ERROR: &quot;Uncaught (in promise): overlay does not exist&quot;</code> when trying to dismiss the modal. Another issue that I saw people having when trying to find a solution.</p>\n<h3 id=\"solution\"><a href=\"#solution\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Solution</h3>\n<h4 id=\"creating-a-modal-page\"><a href=\"#creating-a-modal-page\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Creating a ModalÂ Page</h4>\n<p>Very basic, just run <code class=\"language-text\">ionic g page modal</code> using Ionic CLI just like you would for any other new page.</p>\n<h4 id=\"fixing-the-routing\"><a href=\"#fixing-the-routing\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Fixing theÂ Routing</h4>\n<p>Since modal pages arenâ€™t part of your app navigation, you must remove the automatic entry for this page from your <code class=\"language-text\">app-routing-module.ts</code> file.</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const routes: Routes = [\n     { path: &#39;&#39;, redirectTo: &#39;home&#39;, pathMatch: &#39;full&#39; },  \n     ...  \n     {Ìµ ÌµpÌµaÌµtÌµhÌµ:Ìµ Ìµ&#39;ÌµmÌµoÌµdÌµaÌµlÌµ&#39;Ìµ,Ìµ Ìµ  \n       lÌµoÌµaÌµdÌµCÌµhÌµiÌµlÌµdÌµrÌµeÌµnÌµ:Ìµ Ìµ&#39;Ìµ.Ìµ/ÌµmÌµoÌµdÌµaÌµlÌµ/ÌµmÌµoÌµdÌµaÌµlÌµ.ÌµmÌµoÌµdÌµuÌµlÌµeÌµ#ÌµMÌµoÌµdÌµaÌµlÌµPÌµaÌµgÌµeÌµMÌµoÌµdÌµuÌµlÌµeÌµ&#39;Ìµ Ìµ}Ìµ\n];</code></pre></div>\n<h4 id=\"fix-the-modals-module\"><a href=\"#fix-the-modals-module\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Fix the Modalâ€™sÂ Module</h4>\n<p>This part is neccessary to solve the issue.</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">@NgModule({  \n     declarations: \\[ **ModalPage** \\],  \n     imports: \\[ ... \\],  \n     entryComponents: \\[ **ModalPage** \\],  \n     exports: \\[ **ModalPage \\]  \n**})  \nexport class ModalPageModule {}</code></pre></div>\n<p>The documentation does not show to include the page in <code class=\"language-text\">entryComponents</code> or <code class=\"language-text\">exports</code>.</p>\n<h4 id=\"declare-the-modal-for-use\"><a href=\"#declare-the-modal-for-use\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Declare the Modal forÂ Use</h4>\n<p>Now that the modalâ€™s module is ready, import it into the page you want to use it in.</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">@NgModule({  \n     declarations: \\[ HomePage, **ModalPage** \\],  \n     imports: \\[ ... \\],  \n     entryComponents: \\[ **ModalPage** \\],})  \nexport class HomePageModule {}</code></pre></div>\n<p>The documentation does not show either of these! This is a big part of how the issue happens. Including the <code class=\"language-text\">ModalPage</code> in <code class=\"language-text\">imports</code> is what creates the problem (and is what I thought to do).</p>\n<h4 id=\"create-the-modal\"><a href=\"#create-the-modal\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Create theÂ Modal</h4>\n<p>The following is exactly how the documentation explains, Iâ€™m just including it here for completionâ€™s sake.</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { ModalController } from &#39;@ionic/angular&#39;;\n\nexport class **HomePage** {\n\n  constructor(private modalCtrl: ModalController) { }\n\n  async openModal() {  \n    const loadAmount = await _this_.modalCtrl.create({  \n      component: **ModalPage**  \n    });  \n    await loadAmount.present();  \n  }\n\n}</code></pre></div>\n<h4 id=\"dismiss-the-modal\"><a href=\"#dismiss-the-modal\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Dismiss theÂ Modal</h4>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { ModalController } from &#39;@ionic/angular&#39;;\n\nexport class **ModalPage** {\n\n  constructor(private modalCtrl: ModalController) { }\n\n  async close() {  \n    await _this_.modalCtrl.dismiss();  \n  }\n\n}</code></pre></div>\n<h3 id=\"conclusion\"><a href=\"#conclusion\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Conclusion</h3>\n<p>Just like that, everything should be working perfectly. I was so relieved when I implemented these steps. Thank you to <a href=\"https://medium.com/u/706b6e4cb229\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Christian Francia</a> for providing this solution in a <a href=\"https://github.com/ionic-team/ionic/issues/17939#issuecomment-479550015\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Github issue</a>, hopefully this blog post will have a little better SEO and will be easier to find ğŸ˜ƒ</p>\n","date":"August 16, 2019","timeToRead":2,"description":"After taking much too long to figure this out myself, Iâ€™m writing a blog post about it to help the next dev.","image":""}},"context":{}}