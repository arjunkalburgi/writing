{"hash":"6eabbf701c27e0f138715934013e7acffa4749e7","data":{"post":{"id":"66e415dbdd5abea92501200152e32f40","title":"How to use Modals in Ionic v4","content":"<blockquote>\n<p>After taking much too long to figure this out myself, I’m writing a blog post about it to help the next dev.</p>\n</blockquote>\n<p>This should be easy, but the documentation for it is a little lacking. I’ve <a href=\"https://github.com/ionic-team/ionic/pull/17944#issuecomment-522067671\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">asked</a> them to update it but just in case they don’t I’m writing this for your sanity.</p>\n<h3 id=\"issue\"><a href=\"#issue\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Issue</h3>\n<p>Originally my issue was that the modal was activating too early, before the button-press to activate the modal. When I would navigate to the page that the modal should be accessed on, it would show the modal as a full page instead of the page I’ve navigated to.</p>\n<p>This solution will also help solve the <code class=\"language-text\">ERROR ERROR: &quot;Uncaught (in promise): overlay does not exist&quot;</code> when trying to dismiss the modal. Another issue that I saw people having when trying to find a solution.</p>\n<h3 id=\"solution\"><a href=\"#solution\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Solution</h3>\n<h4 id=\"creating-a-modal-page\"><a href=\"#creating-a-modal-page\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Creating a Modal Page</h4>\n<p>Very basic, just run <code class=\"language-text\">ionic g page modal</code> using Ionic CLI just like you would for any other new page.</p>\n<h4 id=\"fixing-the-routing\"><a href=\"#fixing-the-routing\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Fixing the Routing</h4>\n<p>Since modal pages aren’t part of your app navigation, you must remove the automatic entry for this page from your <code class=\"language-text\">app-routing-module.ts</code> file.</p>\n<div class=\"gridsome-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> routes<span class=\"token operator\">:</span> Routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n     <span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> redirectTo<span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span> pathMatch<span class=\"token operator\">:</span> <span class=\"token string\">'full'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>  \n     <span class=\"token operator\">...</span>  \n     <span class=\"token punctuation\">{</span>̵ ̵p̵a̵t̵h̵<span class=\"token operator\">:</span>̵ ̵<span class=\"token string\">'̵m̵o̵d̵a̵l̵'</span>̵<span class=\"token punctuation\">,</span>̵ ̵  \n       l̵o̵a̵d̵<span class=\"token constant\">C</span>̵h̵i̵l̵d̵r̵e̵n̵<span class=\"token operator\">:</span>̵ ̵<span class=\"token string\">'̵.̵/̵m̵o̵d̵a̵l̵/̵m̵o̵d̵a̵l̵.̵m̵o̵d̵u̵l̵e̵#̵M̵o̵d̵a̵l̵P̵a̵g̵e̵M̵o̵d̵u̵l̵e̵'</span>̵ ̵<span class=\"token punctuation\">}</span>̵\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4 id=\"fix-the-modals-module\"><a href=\"#fix-the-modals-module\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Fix the Modal’s Module</h4>\n<p>This part is neccessary to solve the issue.</p>\n<div class=\"gridsome-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>  \n     declarations<span class=\"token operator\">:</span> \\<span class=\"token punctuation\">[</span> <span class=\"token operator\">**</span>ModalPage<span class=\"token operator\">**</span> \\<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>  \n     imports<span class=\"token operator\">:</span> \\<span class=\"token punctuation\">[</span> <span class=\"token operator\">...</span> \\<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>  \n     entryComponents<span class=\"token operator\">:</span> \\<span class=\"token punctuation\">[</span> <span class=\"token operator\">**</span>ModalPage<span class=\"token operator\">**</span> \\<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>  \n     exports<span class=\"token operator\">:</span> \\<span class=\"token punctuation\">[</span> <span class=\"token operator\">**</span>ModalPage \\<span class=\"token punctuation\">]</span>  \n<span class=\"token operator\">**</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>  \n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ModalPageModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>The documentation does not show to include the page in <code class=\"language-text\">entryComponents</code> or <code class=\"language-text\">exports</code>.</p>\n<h4 id=\"declare-the-modal-for-use\"><a href=\"#declare-the-modal-for-use\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Declare the Modal for Use</h4>\n<p>Now that the modal’s module is ready, import it into the page you want to use it in.</p>\n<div class=\"gridsome-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>  \n     declarations<span class=\"token operator\">:</span> \\<span class=\"token punctuation\">[</span> HomePage<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>ModalPage<span class=\"token operator\">**</span> \\<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>  \n     imports<span class=\"token operator\">:</span> \\<span class=\"token punctuation\">[</span> <span class=\"token operator\">...</span> \\<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>  \n     entryComponents<span class=\"token operator\">:</span> \\<span class=\"token punctuation\">[</span> <span class=\"token operator\">**</span>ModalPage<span class=\"token operator\">**</span> \\<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>  \n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HomePageModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>The documentation does not show either of these! This is a big part of how the issue happens. Including the <code class=\"language-text\">ModalPage</code> in <code class=\"language-text\">imports</code> is what creates the problem (and is what I thought to do).</p>\n<h4 id=\"create-the-modal\"><a href=\"#create-the-modal\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Create the Modal</h4>\n<p>The following is exactly how the documentation explains, I’m just including it here for completion’s sake.</p>\n<div class=\"gridsome-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ModalController <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@ionic/angular'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token operator\">**</span>HomePage<span class=\"token operator\">**</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> modalCtrl<span class=\"token operator\">:</span> ModalController</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token function\">openModal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n    <span class=\"token keyword\">const</span> loadAmount <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> _this_<span class=\"token punctuation\">.</span>modalCtrl<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>  \n      component<span class=\"token operator\">:</span> <span class=\"token operator\">**</span>ModalPage<span class=\"token operator\">**</span>  \n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    <span class=\"token keyword\">await</span> loadAmount<span class=\"token punctuation\">.</span><span class=\"token function\">present</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"dismiss-the-modal\"><a href=\"#dismiss-the-modal\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Dismiss the Modal</h4>\n<div class=\"gridsome-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ModalController <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@ionic/angular'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token operator\">**</span>ModalPage<span class=\"token operator\">**</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> modalCtrl<span class=\"token operator\">:</span> ModalController</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n    <span class=\"token keyword\">await</span> _this_<span class=\"token punctuation\">.</span>modalCtrl<span class=\"token punctuation\">.</span><span class=\"token function\">dismiss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"conclusion\"><a href=\"#conclusion\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Conclusion</h3>\n<p>Just like that, everything should be working perfectly. I was so relieved when I implemented these steps. Thank you to <a href=\"https://medium.com/u/706b6e4cb229\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Christian Francia</a> for providing this solution in a <a href=\"https://github.com/ionic-team/ionic/issues/17939#issuecomment-479550015\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Github issue</a>, hopefully this blog post will have a little better SEO and will be easier to find 😃</p>\n","date":"August 16, 2019","timeToRead":2,"cover":null,"description":"After taking much too long to figure this out myself, I’m writing a blog post about it to help the next dev."}},"context":{}}