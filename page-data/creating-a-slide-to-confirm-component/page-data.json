{"componentChunkName":"component---src-templates-blog-post-js","path":"/creating-a-slide-to-confirm-component/","webpackCompilationHash":"9d3a6382893af0b24c67","result":{"data":{"site":{"siteMetadata":{"title":"Writing","author":"Arjun Kalburgi"}},"markdownRemark":{"id":"a3854f5a-a6aa-53e9-af26-18971f97e7fc","excerpt":"The Amazon app features a Slide-to-Confirm element inspired by Apple's \"Swipe to Unlock\". Surprisingly, a similar component is nowhere on the internet, so I'llâ€¦","html":"<blockquote>\n<p>The Amazon app features a Slide-to-Confirm element inspired by Apple's \"Swipe to Unlock\". Surprisingly, a similar component is nowhere on the internet, so I'll need to create it myself.</p>\n</blockquote>\n<p>Designers can use Slide-to-Confirm as a tool to help their users feel more secure (than a button that can be accidentally tapped) and more accomplished (takes more work to slide across the screen). Amazon uses it in their \"Buy Now\" flow to prevent accidental purchases. </p>\n<p><img src=\"https://raw.githubusercontent.com/arjunkalburgi/writing/master/content/blog/custom-input-behaviour-for-numbers/amazon2.png\" alt=\"final\">\n<img src=\"https://raw.githubusercontent.com/arjunkalburgi/writing/master/content/blog/custom-input-behaviour-for-numbers/amazon3.jpeg\" alt=\"final\"></p>\n<p>The UX of this component is great! Showing green and changing the message as you swipe brings out the security and accomplishment feelings. Unfortunately, it's also highly custom.</p>\n<p><strong>Looking for similar's online</strong></p>\n<p>The only similar Javascript-based components I could find online were this <a href=\"https://codepen.io/bennettfeely/pen/jyGeJ\">codepen</a>, this <a href=\"https://www.davidbcalhoun.com/2011/implementing-iphones-slider-unlock-with-input-typerange/\">blog</a>, and this <a href=\"https://github.com/agentS/react-native-slider-button\">React Native library</a>; none of which really come close to the functionality I'm looking for. Android and iOS devs had something closer but I'm looking for a Javascript and CSS solution. They all use the <code>&#x3C;input type='range'</code> element, so let's start with that.</p>\n<p><strong>Browser support for Thumb Range</strong></p>\n<p>Using the blog to help kickstart my progress, I made a codepen and quickly figured out some interesting things. The blog only supports Firefox when applying CSS to the <code>&#x3C;input type='range'</code> element using <code>input::-moz-range-thumb</code>. I needed to include <code>input::-webkit-slider-thumb</code> for support on Safari and Chrome, the platforms I'm developing for.</p>\n<p>Also strange is that Chrome required a <code>margin-bottom: -7px</code> in order to center the slider vertically.</p>\n<p>Progress on the component here:\n<a href=\"https://codepen.io/arjunkalburgi/pen/dyyJMKO\"><div><iframe \n        height='350' \n        scrolling='no' \n        src='//codepen.io/arjunkalburgi/embed/preview/dyyJMKO/?height=350&theme-id=light&default-tab=html,result' \n        frameborder='no' \n        allowtransparency='true' \n        allowfullscreen='true' \n        style='width: 100%;'></iframe></div></a></p>\n<p><strong>A new idea</strong></p>\n<p>Turning my attention to how I'll solve changing the track message and colour as you swipe got me looking at something new: draggable components. </p>\n<p>What if I was able to use some drag-and-drop JavaScript to make my slider?</p>\n<p>Staring with <a href=\"https://www.kirupa.com/html5/drag.htm\">this drag tutorial from Kirupa</a>, I first modified it to only drag horizontally and then to not drag over the container width.</p>\n<p>Progress here:\n<a href=\"https://codepen.io/arjunkalburgi/pen/GRRyjzZ\"><div><iframe \n        height='350' \n        scrolling='no' \n        src='//codepen.io/arjunkalburgi/embed/preview/GRRyjzZ/?height=350&theme-id=light&default-tab=html,result' \n        frameborder='no' \n        allowtransparency='true' \n        allowfullscreen='true' \n        style='width: 100%;'></iframe></div></a></p>\n<p><strong>Is the new idea feasable?</strong></p>\n<p>If the new idea could actually work, then I'll be able to put elements on both sides of the slide item that will show and hide as I move the slide item. </p>\n<p>I was able to create this functionality with blue and green bars. The most difficult part about this was honestly figuring out the logic of the HTML elements. I decided that having two tracks on top of each other with <code>position: absolute</code> and a high <code>z-index</code> for the item worked best: </p>\n<pre><code class=\"language-html\">&#x3C;div id=\"outerContainer\">\n  &#x3C;div id=\"container\">\n    &#x3C;div id=\"item\">&#x3C;/div>\n  &#x3C;/div>\n  &#x3C;div id=\"container\">\n    &#x3C;div id=\"green\">&#x3C;/div>\n    &#x3C;div id=\"blue\">&#x3C;/div>\n  &#x3C;/div>\n&#x3C;/div>\n</code></pre>\n<p>The bars move by changing their width in JS along with the drag of the item.</p>\n<p>Progress here:\n<a href=\"https://codepen.io/arjunkalburgi/pen/rNNpWdX\"><div><iframe \n        height='350' \n        scrolling='no' \n        src='//codepen.io/arjunkalburgi/embed/preview/rNNpWdX/?height=350&theme-id=light&default-tab=html,result' \n        frameborder='no' \n        allowtransparency='true' \n        allowfullscreen='true' \n        style='width: 100%;'></iframe></div></a></p>\n<p><strong>Text in the Bars</strong></p>\n<p>Now to have text within the bars so that sliding reveals/conseals the text. I quickly made an inner div with the text and made it fit to the grandparent: </p>\n<pre><code class=\"language-css\">#bar_inner {\n    // center the text\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  \n  // position bar\n  width: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n</code></pre>\n<p>However this made both text's appear on top of each other. </p>\n<p><img src=\"https://raw.githubusercontent.com/arjunkalburgi/writing/master/content/blog/custom-input-behaviour-for-numbers/brokentext.png\" alt=\"brokentext\"></p>\n<p>And adding  <code>overflow: hidden</code> to the parent bar's does nothing (because the parent is not absolute as well). I'm actually really stuck here... ðŸ¤”</p>\n<p>In the end I went with not the most elegant solution, but I think with a CSS transition it can be okay. I used JS to switch the <code>z-index</code> of the bars, so that the text essentially switches places and is covered by the other bar. </p>\n<p>See it here:\n<a href=\"https://codepen.io/arjunkalburgi/pen/poopRzX\"><div><iframe \n        height='350' \n        scrolling='no' \n        src='//codepen.io/arjunkalburgi/embed/preview/poopRzX/?height=350&theme-id=light&default-tab=html,result' \n        frameborder='no' \n        allowtransparency='true' \n        allowfullscreen='true' \n        style='width: 100%;'></iframe></div></a></p>\n<p><strong>Confirm alert, and fallback</strong></p>\n<p>Now that I have my meat set up, I need to add the potatoes. I need to trigger an event once the slider reaches the end and if the slider doesn't reach the end, it should fallback to the beginning. </p>\n<p>Both potatoes were pretty easy, just needed to have some logic in the <code>dragEnd</code> function</p>\n<pre><code class=\"language-javascript\">// in dragEnd(e)\nif (currentX &#x3C; dragWidth) {\n  setTranslate(0, dragItem);\n} else {\n  alert(\"Confirmed!\");\n}\n</code></pre>\n<p>I've added an animation on fallback and wrapped the alert in a function for the CodePen:\n<a href=\"https://codepen.io/arjunkalburgi/pen/BaaJYbx\"><div><iframe \n        height='350' \n        scrolling='no' \n        src='//codepen.io/arjunkalburgi/embed/preview/BaaJYbx/?height=350&theme-id=light&default-tab=html,result' \n        frameborder='no' \n        allowtransparency='true' \n        allowfullscreen='true' \n        style='width: 100%;'></iframe></div></a></p>\n<p><strong>Finalizing</strong></p>\n<p>To finish it off, I cleaned up my code using BEM CSS, and removed some of the unnecessary things like the coloured bars(*) and styled the dragItem. </p>\n<blockquote>\n<p>(*) Since the <code>overflow: hidden</code> didn't work, it's better to go with an opacity change for the text and changing the background colour of the bar instead of keeping two different ones. </p>\n</blockquote>\n<p><a href=\"https://codepen.io/arjunkalburgi/pen/QWWamxW\"><div><iframe \n        height='350' \n        scrolling='no' \n        src='//codepen.io/arjunkalburgi/embed/preview/QWWamxW/?height=350&theme-id=light&default-tab=html,result' \n        frameborder='no' \n        allowtransparency='true' \n        allowfullscreen='true' \n        style='width: 100%;'></iframe></div></a></p>\n<p><img src=\"https://raw.githubusercontent.com/arjunkalburgi/writing/master/content/blog/creating-a-slide-to-confirm-component/final.gif\" alt=\"final\"></p>\n<p><strong>Converting to Angular</strong></p>\n<p>Now that I have the component in JS, I need it in Angular. This was simple enough overall, but had an annoying time making it work due to some scope bugs. After taking the weekend off and then running the code locally, I was able to figure them all out and have it all working. </p>\n<p>I put the final version in CodePen here:\n<a href=\"https://codepen.io/arjunkalburgi/pen/xxxpzPx\"><div><iframe \n        height='350' \n        scrolling='no' \n        src='//codepen.io/arjunkalburgi/embed/preview/xxxpzPx/?height=350&theme-id=light&default-tab=html,result' \n        frameborder='no' \n        allowtransparency='true' \n        allowfullscreen='true' \n        style='width: 100%;'></iframe></div></a></p>\n<p>I'd like to go a step further and create a github repo and NPM library for this component, but maybe that'll be for another day! </p>\n<p>Thanks for reading! </p>\n<p><img src=\"https://www.arjunkalburgi.com/assets/Graphics/Backgrounds/leaves-white.jpg\" alt=\"some leaves to end with\"></p>","frontmatter":{"title":"Creating a \"Swipe-to-Confirm\" Component","date":"November 05, 2019","description":"The Amazon app features a Slide-to-Confirm element inspired by Apple's \"Swipe to Unlock\". Surprisingly, a similar component is nowhere on the internet, so I'll need to create it myself."}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/creating-a-slide-to-confirm-component/","previous":{"fields":{"slug":"/custom-input-behaviour-for-numbers/"},"frontmatter":{"title":"Custom Input Behaviour for Numbers"}},"next":{"fields":{"slug":"/Creating a Variable Design System/"},"frontmatter":{"title":"Creating a Variable Design System"}}}}}